{"version":3,"file":"gallery.js","sourceRoot":"","sources":["/Users/chaz/Sites/chaz-site-stages/ccsouthard-5/assets/js/gallery.coffee"],"names":[],"mappings":"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","sourcesContent":["# filter components\n$date_btn = $('.filter .date')\n$dates = $('.filter .date .dropdown')\n$medium_btn = $('.filter .medium')\n$mediums = $('.filter .medium .dropdown')\n# modal components\n$modal = $('.gallery-modal .modal-inner')\n$close_btn = $('.gallery-modal .close a')\n$previous_btn = $('.gallery-modal .previous a')\n$next_btn = $('.gallery-modal .next a')\n\n\n# variables\ngallery_artwork = artwork\ndate_filter = false\nmedium_filter = false\nmodal_index = -1\n\n\n# functions\nsort_artwork = (artwork) ->\n    artwork.sort((a, b) ->\n        result = b.date - a.date\n        if result == 0 then a.title.localeCompare(b.title)\n        else result\n        )\n\nupdate_artwork = ->\n    gallery_artwork = []\n    for art in artwork\n        if (!date_filter || art._attributes['data-date'] == date_filter) && (!medium_filter || art._attributes['data-medium'] == medium_filter)\n            gallery_artwork.push(art)\n    $('.gallery').html(\n        templates.gallery_inner(sorted_artwork:gallery_artwork)\n        )\n    $('.gallery figure > a').click(open_modal)\n\nupdate_modal = ->\n    $modal.html(templates.gallery_modal(artwork:gallery_artwork, index:modal_index))\n\nopen_modal = (e) ->\n    e.preventDefault()\n    modal_index = $(this).parent().data('index')\n\n    update_modal()\n    $('body').addClass('modal')\n\n    $('html').on('keydown.modal', (e) ->\n        key = e.which\n        if key == 37 # left arrow\n            e.preventDefault()\n            $previous_btn.click()\n        else if key == 39 # right arrow\n            e.preventDefault()\n            $next_btn.click()\n        else if key == 27 # escape\n            e.preventDefault()\n            $close_btn.click()\n        )\n\n# populate filters\ndates = []\nmediums = []\nfor art in artwork\n    if art._attributes['data-date'] not in dates\n        dates.push(art._attributes['data-date'])\n    if art._attributes['data-medium'] not in mediums\n        mediums.push(art._attributes['data-medium'])\ndates.sort().reverse()\n\n$dates.append('<li class=\"all\"><a href=\"#\">All</a></li>')\nfor date in dates\n    $li = $('<li>')\n    $a = $('<a href=\"#\">').text(date).data('date', date)\n    $dates.append($li.append($a))\n\n$mediums.append('<li class=\"all\"><a href=\"#\">All</a></li>')\nfor medium in mediums\n    $li = $('<li>')\n    $a = $('<a href=\"#\">').text(medium).data('medium', medium)\n    $mediums.append($li.append($a))\n\n\n# open / close filter\n$date_btn.click (e) ->\n    e.preventDefault()\n    if $dates.hasClass('hidden')\n        $dates.removeClass('hidden')\n        if not $mediums.hasClass('hidden')\n            $mediums.addClass('hidden')\n    else\n        $dates.addClass('hidden')\n\n$medium_btn.click (e) ->\n    e.preventDefault()\n    if $mediums.hasClass('hidden')\n        $mediums.removeClass('hidden')\n        if not $dates.hasClass('hidden')\n            $dates.addClass('hidden')\n    else\n        $mediums.addClass('hidden')\n\n\n# filter change\n$dates.find('a').click (e) ->\n    e.preventDefault()\n    $this = $(this)\n    $date_btn.find('> span').text(if $this.parent().hasClass('all') then 'Year' else $this.text())\n\n    date_filter = !$this.parent().hasClass('all') && $this.data('date')\n    update_artwork()\n\n$mediums.find('a').click (e) ->\n    e.preventDefault()\n    $this = $(this)\n    $medium_btn.find('> span').text(if $this.parent().hasClass('all') then 'Medium' else $this.text())\n\n    medium_filter = !$this.parent().hasClass('all') && $this.data('medium')\n    update_artwork()\n\n# modal open / close / previous / next\n$('.gallery figure > a').click(open_modal)\n\n$close_btn.click (e) ->\n    e.preventDefault()\n    $('body').removeClass('modal')\n    $modal.empty()\n    $('html').off('keydown.modal')\n    modal_index = -1\n\n$previous_btn.click (e) ->\n    e.preventDefault()\n    if modal_index == -1\n        return\n    modal_index -= 1\n    if modal_index < 0\n        modal_index = gallery_artwork.length-1\n    update_modal()\n\n$next_btn.click (e) ->\n    e.preventDefault()\n    if modal_index == -1\n        return\n    modal_index += 1\n    if modal_index >= gallery_artwork.length\n        modal_index = 0\n    update_modal()\n"]}